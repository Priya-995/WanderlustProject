<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/css/style.css">
     <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
      <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <%- include('../includes/navbar') %>
     

  <div class="container mx-auto px-4">
    <%- include('../includes/flash') %>
   
      <%- body %>
    
</div>
      <%- include('../includes/footer') %>
  
</body>

    <script>
        // Particle System
        const canvas = document.getElementById('particles-canvas');
        const ctx = canvas.getContext('2d');
        
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const particles = [];
        const particleCount = 80;

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 3 + 1;
                this.speedX = Math.random() * 1 - 0.5;
                this.speedY = Math.random() * 1 - 0.5;
                this.opacity = Math.random() * 0.5 + 0.2;
            }

            update() {
                this.x += this.speedX;
                this.y += this.speedY;

                if (this.x > canvas.width) this.x = 0;
                if (this.x < 0) this.x = canvas.width;
                if (this.y > canvas.height) this.y = 0;
                if (this.y < 0) this.y = canvas.height;
            }

            draw() {
                ctx.fillStyle = `rgba(167, 139, 250, ${this.opacity})`;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function init() {
            for (let i = 0; i < particleCount; i++) {
                particles.push(new Particle());
            }
        }

        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            particles.forEach(particle => {
                particle.update();
                particle.draw();
            });

            // Draw connections
            particles.forEach((a, i) => {
                particles.slice(i + 1).forEach(b => {
                    const dx = a.x - b.x;
                    const dy = a.y - b.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < 120) {
                        ctx.strokeStyle = `rgba(167, 139, 250, ${0.15 * (1 - distance / 120)})`;
                        ctx.lineWidth = 1;
                        ctx.beginPath();
                        ctx.moveTo(a.x, a.y);
                        ctx.lineTo(b.x, b.y);
                        ctx.stroke();
                    }
                });
            });

            requestAnimationFrame(animate);
        }

        init();
        animate();

        // Resize handler
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });

        // Navbar scroll effect
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('shadow-2xl');
            } else {
                navbar.classList.remove('shadow-2xl');
            }
        });

        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');

        mobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
            const icon = mobileMenuBtn.querySelector('i');
            icon.classList.toggle('fa-bars');
            icon.classList.toggle('fa-times');
        });
        // Scroll-to-top button functionality
  const scrollTopBtn = document.getElementById('scrollTopBtn');
  window.addEventListener('scroll', () => {
    if (window.scrollY > 300) scrollTopBtn.classList.remove('hidden');
    else scrollTopBtn.classList.add('hidden');
  });
  scrollTopBtn.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });
  //SHOW EJS

  // Guest counter
  let guestCount = 2;
  const guestCountEl = document.getElementById('guestCount');
  
  document.getElementById('increaseGuests').addEventListener('click', () => {
    if (guestCount < 10) {
      guestCount++;
      guestCountEl.textContent = guestCount;
      guestCountEl.parentElement.classList.add('scale-110');
      setTimeout(() => guestCountEl.parentElement.classList.remove('scale-110'), 200);
    }
  });
  
  document.getElementById('decreaseGuests').addEventListener('click', () => {
    if (guestCount > 1) {
      guestCount--;
      guestCountEl.textContent = guestCount;
      guestCountEl.parentElement.classList.add('scale-110');
      setTimeout(() => guestCountEl.parentElement.classList.remove('scale-110'), 200);
    }
  });

  // Wishlist toggle
  const wishlistBtn = document.getElementById('wishlistBtn');
  let isWishlisted = false;
  
  wishlistBtn.addEventListener('click', () => {
    isWishlisted = !isWishlisted;
    const icon = wishlistBtn.querySelector('i');
    
    if (isWishlisted) {
      icon.classList.remove('far');
      icon.classList.add('fas');
      wishlistBtn.classList.add('scale-110');
      setTimeout(() => wishlistBtn.classList.remove('scale-110'), 200);
    } else {
      icon.classList.remove('fas');
      icon.classList.add('far');
    }
  });

 // ⁡⁣⁢⁣NEW EJS⁡
  // Title character counter
  const titleInput = document.getElementById('titleInput');
  const titleCount = document.getElementById('titleCount');
  
  titleInput.addEventListener('input', () => {
    titleCount.textContent = titleInput.value.length;
  });

  // Description character counter
  const descInput = document.getElementById('descInput');
  const descCount = document.getElementById('descCount');
  
  descInput.addEventListener('input', () => {
    descCount.textContent = descInput.value.length;
  });

  // Price formatter
  const priceInput = document.getElementById('priceInput');
  const priceFormatted = document.getElementById('priceFormatted');
  
  priceInput.addEventListener('input', () => {
    const price = parseInt(priceInput.value) || 0;
    priceFormatted.textContent = '₹' + price.toLocaleString('en-IN');
  });

  // Image preview
  const imageInput = document.getElementById('imageInput');
  const imagePreview = document.getElementById('imagePreview');
  const previewImg = document.getElementById('previewImg');
  
  imageInput.addEventListener('input', () => {
    const url = imageInput.value.trim();
    
    if (url && (url.startsWith('http://') || url.startsWith('https://'))) {
      previewImg.src = url;
      imagePreview.classList.remove('hidden');
      
      previewImg.onerror = () => {
        imagePreview.classList.add('hidden');
      };
    } else {
      imagePreview.classList.add('hidden');
    }
  });

  // Form submission
  const form = document.getElementById('listingForm');
  const submitBtn = document.getElementById('submitBtn');
  
  form.addEventListener('submit', (e) => {
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin text-2xl mr-2"></i>Creating Listing...';
    submitBtn.disabled = true;
  });

  // Progress animation on scroll
  const sections = document.querySelectorAll('form > div');
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '0';
        entry.target.style.transform = 'translateY(20px)';
        setTimeout(() => {
          entry.target.style.transition = 'all 0.6s ease-out';
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }, 100);
      }
    });
  }, { threshold: 0.1 });

  sections.forEach(section => observer.observe(section));

 
 
    </script>
</html>
